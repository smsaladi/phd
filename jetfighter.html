<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 8 JetFighter | Investigations on the computer</title>
<meta name="author" content="Shyam Saladi">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.2.9000/tabs.js"></script><script src="libs/bs3compat-0.2.2.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-141197094-1"></script><script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-141197094-1');
  </script><meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="mystyles.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Investigations on the computer</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"> </a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li><a class="" href="published-works.html">Published works</a></li>
<li class="book-part">Predicting expression</li>
<li><a class="" href="a-membrane-protein-expression-predictor.html"><span class="header-section-number">1</span> A membrane protein expression predictor</a></li>
<li><a class="" href="simulations-towards-expression.html"><span class="header-section-number">2</span> Simulations towards expression</a></li>
<li><a class="" href="epilogue.html"><span class="header-section-number">3</span> Epilogue</a></li>
<li class="book-part">Tail-anchored protein targeting</li>
<li><a class="" href="sgt2-cs-helical-hand-binds-short-hydrophobic-helicies.html"><span class="header-section-number">4</span> Sgt2-C’s helical-hand binds short hydrophobic helicies</a></li>
<li><a class="" href="defining-the-sti1-domain.html"><span class="header-section-number">5</span> Defining the STI1 domain</a></li>
<li><a class="" href="a-short-hydrophobic-patch-classifies-ta-proteins.html"><span class="header-section-number">6</span> A short hydrophobic patch classifies TA proteins</a></li>
<li><a class="" href="photosynthetic-get3-proteins.html"><span class="header-section-number">7</span> Photosynthetic Get3 proteins</a></li>
<li class="book-part">Colormaps</li>
<li><a class="active" href="jetfighter.html"><span class="header-section-number">8</span> JetFighter</a></li>
<li><a class="" href="structural-biologists-lets-mind-our-colors.html"><span class="header-section-number">9</span> Structural biologists, let’s mind our colors</a></li>
<li class="book-part">Sequence searching</li>
<li><a class="" href="sequence-search-in-an-instant.html"><span class="header-section-number">10</span> Sequence search in an instant</a></li>
<li><a class="" href="half-repeat-clc-proteins.html"><span class="header-section-number">11</span> Half-repeat ClC proteins</a></li>
<li><a class="" href="giardia-get-pathway-proteins.html"><span class="header-section-number">12</span> Giardia GET pathway proteins</a></li>
<li class="book-part">Community involvement</li>
<li><a class="" href="mitigating-conference-cancellations.html"><span class="header-section-number">13</span> Mitigating conference cancellations</a></li>
<li><a class="" href="increasing-equity-diversity-and-inclusion.html"><span class="header-section-number">14</span> Increasing equity, diversity and inclusion</a></li>
<li><a class="" href="moltemplate.html"><span class="header-section-number">15</span> Moltemplate</a></li>
<li><a class="" href="bits-of-code.html"><span class="header-section-number">16</span> Bits of Code</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/smsaladi/phd">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="jetfighter" class="section level1">
<h1>
<span class="header-section-number">8</span> JetFighter<a class="anchor" aria-label="anchor" href="#jetfighter"><i class="fas fa-link"></i></a>
</h1>
<!--
# JetFighter: Towards figure accuracy and accessibility
-->
<div id="citation-6" class="section level3">
<h3>
<span class="header-section-number">8.0.1</span> Citation<a class="anchor" aria-label="anchor" href="#citation-6"><i class="fas fa-link"></i></a>
</h3>
<p>A version of this chapter was published on as part of the eLife Labs series:</p>
<p>Shyam Saladi with editorial assistance from Emmy Tsang.
JetFighter screens preprints to improve data representation and
colour-blind accessibility.
<a href="https://elifesciences.org/labs">Labs</a>. Apr 4, 2019</p>
</div>
<div id="towards-figure-accuracy-and-accessibility" class="section level2 unlisted">
<h2>
<span class="header-section-number">8.1</span> Towards figure accuracy and accessibility<a class="anchor" aria-label="anchor" href="#towards-figure-accuracy-and-accessibility"><i class="fas fa-link"></i></a>
</h2>
<p>Figures are the crux of every science story.</p>
<p>Data, the collections of numbers and facts at the centre of most
research, need to be analysed and visualised to be understood. Human
beings are visual creatures: our eyes are attracted to colours, and we
have evolved to easily spot trends and patterns. By turning data into
graphs and charts, visualisation tools and techniques help scientists
develop intuition for and draw conclusions about the system at study.</p>
<p>To see numerical relationships, we rely on colour maps to transform
variation in numbers to variation in colours. Constructing a colour map
is hard since our eyes and visual systems perform complex, non-linear
operations (e.g. we are more sensitive to contrasts in the orange-red
part of the light). Jet is a colour map that spans the rainbow by
linearly interpolating red, green and blue. Despite its popularity, Jet
introduces well-established visual artefacts and produces figures
inaccessible to our colleagues with colourblindness (for an overview,
see <a href="https://doi.org/10.1109/MCG.2007.323435">Borland &amp; Taylor, 2007</a>).
Regardless of its obvious downsides, Jet is the most widely used colour
map in the sciences.</p>
<p>Arising out of a friendly challenge to email every author that has
published a paper with a figure using Jet, JetFighter is a
proof-of-concept app to enable the community to improve visualisation.</p>
<div class="figure">
<img src="ch30_color/figs/ch30_pt40_overview.png" id="fig:overview" short-caption="A screenshot of the table of papers and their detection status." alt=""><p class="caption">JetFighter shows the detection statuses of recent articles in a paginated table with per-page thumbnails expandable into view.</p>
</div>
<blockquote>
<p><a href="https://jetfighter.ecrlife.org/">Launch JetFighter</a></p>
</blockquote>
<p>JetFighter screens each manuscript posted on bioRxiv to infer which, if
any, colour maps were used in creating the image(s) on each page of the
document. If a rainbow colour map is detected, potentially problematic
pages of the manuscript are flagged in a message sent to the authors,
suggesting improvements to their work.</p>
<p>Technically, new manuscripts are identified by monitoring the bioRxiv
Twitter feed (<a href="http://www.tweepy.org/">tweepy</a>;
<a href="https://github.com/smsaladi/jetfighter/blob/164ea30a6d0500e6f62be58fadfd7a16456b2de6/webapp.py#L351-L357">code</a>)
on a daily basis. Initially, finding a way to keep up with new preprints
was a challenge: parsing the bioRxiv Twitter feed proves simpler than
monitoring the bioRxiv RSS feed, as the Twitter feed has a longer
accessible history and a simpler, pre-built Python interface.</p>
<p>After the manuscript PDF is downloaded, each page is converted into an
image. This was initially done on the fly
(<a href="https://poppler.freedesktop.org/">poppler</a>;
<a href="https://github.com/smsaladi/jetfighter/blob/dd94d67854892175072d9b333b28c2fa8dfac58a/detect_cmap.py#L50">code</a>),
but it saddled the web server with a considerable workload. Paul
Shannon, eLife’s Head of Technology, suggested the International Image
Interoperability Framework, which <a href="https://elifesciences.org/labs/d6044799/dynamically-serving-scientific-images-using-iiif">eLife uses to serve
images</a>
and decouples image handling from the rest of the web application.
JetFighter uses
<a href="https://medusa-project.github.io/cantaloupe/">Cantaloupe</a>, which
handles PDF sources out-of-the-box and has multiple levels of caching to
reduce server load.</p>
<p>Next, the image is read and an array of RGB values for each pixel is
generated (<a href="https://scikit-image.org/">scikit-image</a>;
<a href="https://github.com/smsaladi/jetfighter/blob/164ea30a6d0500e6f62be58fadfd7a16456b2de6/detect_cmap.py#L245-L255">code</a>).
It is transformed into a perceptually uniform colour space
(<a href="https://colorspacious.readthedocs.io/en/latest/">colorspacious</a>;
<a href="https://github.com/smsaladi/jetfighter/blob/dd94d67854892175072d9b333b28c2fa8dfac58a/detect_cmap.py#L136-L144">code</a>),
and then compared in composition to a set of colour maps by generating
k-d trees (<a href="https://matplotlib.org/">matplotlib</a> and
<a href="https://scikit-learn.org/">scikit-learn</a>;
<a href="https://github.com/smsaladi/jetfighter/blob/dd94d67854892175072d9b333b28c2fa8dfac58a/detect_cmap.py#L89-L128">code</a>).
The per cent coverage of problematic rainbow colour maps like Jet is
recorded in the database flagging certain manuscripts
(<a href="https://github.com/smsaladi/jetfighter/blob/dd94d67854892175072d9b333b28c2fa8dfac58a/detect_cmap.py#L165-L175">code</a>).
This process takes seconds per page in a compute queue
(<a href="https://redis.io/">redis</a>, <a href="http://python-rq.org/">python-rq</a>;
<a href="https://github.com/smsaladi/jetfighter/blob/164ea30a6d0500e6f62be58fadfd7a16456b2de6/webapp.py#L360-L384">code</a>).
Continuous integration (Travis CI: not open-source;
<a href="https://github.com/smsaladi/jetfighter/blob/164ea30a6d0500e6f62be58fadfd7a16456b2de6/webapp.py#L400-L421">code</a>)
helps to avoid inadvertently introducing bugs in continued development.</p>
<blockquote>
<p><a href="https://github.com/smsaladi/jetfighter">JetFighter Source Code</a></p>
</blockquote>
<p>A web frontend shows the screening status of each manuscript
(<a href="http://flask.pocoo.org/">flask</a> ecosystem,
<a href="https://jquery.com/">jquery</a>, <a href="https://datatables.net/">datatables</a>)
and, via an authenticated interface, allows the results of detections to
be confirmed before an email is sent to the manuscript authors
(<a href="https://github.com/smsaladi/jetfighter/blob/dd94d67854892175072d9b333b28c2fa8dfac58a/templates/email_notification.txt">template</a>,
sendgrid: not open-source). This avoids bothering authors with false
positive detections and allows me to gather a feel for the types of
figures being detected.</p>
<div class="figure">
<img src="ch30_color/figs/ch30_pt40_detailed.png" id="fig:detail" short-caption="A screenshot of the detailed view for a single paper." alt=""><p class="caption">The colour maps inferred for the manuscript help highlight if/why a rainbow colour map was detected.</p>
</div>
<p>In retrospect, strictly false positive detections are rare (less than
1%), but some categories of images would be better served by a more
customised email message. For example, fluorescence images that often
use the red and green channels (of RGB images) to show opposing
fluorophores (e.g. GFP and RFP) are also flagged by JetFighter. These
images are inaccessible to readers with red-green colourblindness. A
tailored message suggesting the best practice of magenta instead of red
would be more helpful to the authors.</p>
<p>So far, around 15,000 manuscripts have been screened, and 1,900
manuscripts with rainbow colour maps or red-green inaccessible images
were detected. In the last month alone, 142 emails have been sent out to
authors concerning their colour-map usage, to positive responses.</p>
<blockquote>
<p>Thank you for creating this system of automatic detection in
preprints! I wasn't aware of the disadvantages of the jet colour map.
I have changed my figure with the parula colour map before
re-submitting the article.</p>
<p>– A preprint author</p>
</blockquote>
<div id="a-call-for-contribution" class="section level3 unlisted unnumbered">
<h3>A call for contribution<a class="anchor" aria-label="anchor" href="#a-call-for-contribution"><i class="fas fa-link"></i></a>
</h3>
<p>In the short term, extending JetFighter’s capabilities to screen
preprints from other platforms and to send more tailored messages would
be wonderful. More broadly, I hope that others will be inspired by the
concept of screening literature to help authors improve their work.
Remarkably, the JetFighter experiment suggests that emails to authors
don’t go ignored. Future tools can explore other feedback channels, from
public communication – including posting a comment or responding to a
tweet – to more refined messages and directly interfacing with
manuscript-management platforms.</p>
<div class="figure">
<img src="ch30_color/figs/ch30_pt40_colormaps.png" id="fig:colormaps" short-caption="Examples of Viridis and Magma being excellent choices over rainbow colormaps like Jet." alt=""><p class="caption">Amongst various popular colour maps,
Viridis and Magma do the best at perceptual uniformity and are robust to colourblindness
(<a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">image source</a>).</p>
</div>
<p>With beautiful alternative colour maps like Viridis, I urge scientists
to rethink the way they portray their data. Those passionate about this
issue could work with experts to compose editorials to suggest changing
the standard for common field-specific visualisations, such as flow
cytometry scatter plots and brain imaging. Until then, JetFighter will
continue to send messages and push for change.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="photosynthetic-get3-proteins.html"><span class="header-section-number">7</span> Photosynthetic Get3 proteins</a></div>
<div class="next"><a href="structural-biologists-lets-mind-our-colors.html"><span class="header-section-number">9</span> Structural biologists, let’s mind our colors</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li>
<a class="nav-link" href="#jetfighter"><span class="header-section-number">8</span> JetFighter</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#citation-6"><span class="header-section-number">8.0.1</span> Citation</a></li></ul>
</li>
<li>
<a class="nav-link" href="#towards-figure-accuracy-and-accessibility"><span class="header-section-number">8.1</span> Towards figure accuracy and accessibility</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#a-call-for-contribution">A call for contribution</a></li></ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/smsaladi/phd/blob/master/ch30_color/pt10_jetfighter.md">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/smsaladi/phd/edit/master/ch30_color/pt10_jetfighter.md">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Investigations on the computer</strong>" was written by Shyam Saladi. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
